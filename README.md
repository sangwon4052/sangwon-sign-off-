# 온라인 결재 시스템 (내부용)

**프로젝트 버전**: v2.0.0 - API 버전  
**개발 완료일**: 2026-01-28  
**시스템 상태**: ✅ **중앙 데이터베이스 기반 - 모든 PC에서 데이터 공유**

---

## 🎯 프로젝트 목표

회사 내부의 결재 프로세스를 디지털화하여 효율적으로 관리하고, 결재 진행 상황을 실시간으로 추적할 수 있는 시스템을 제공합니다.

**✨ 주요 특징**: RESTful Table API를 사용하여 **모든 컴퓨터에서 동일한 데이터를 공유**합니다.

---

## 🚀 주요 변경사항 (v2.0.0)

### ✅ LocalStorage → 중앙 데이터베이스 전환

기존 문제점:
- ❌ 각 컴퓨터의 브라우저별로 데이터가 독립적으로 저장
- ❌ 관리자가 A 컴퓨터에서 계정을 만들어도 B 컴퓨터에서 로그인 불가
- ❌ 결재 데이터가 PC별로 분리되어 공유 불가

해결:
- ✅ **중앙 서버에 모든 데이터 저장**
- ✅ **관리자가 계정 생성 → 모든 PC에서 즉시 로그인 가능**
- ✅ **모든 결재 데이터 실시간 공유**
- ✅ **여러 PC에서 동시에 시스템 사용 가능**

---

## ✨ 주요 기능

### 1. 사용자 인증 시스템
- **회원가입**: 이름, 이메일, 비밀번호, 역할 선택
- **가입 승인 워크플로우**: 관리자 승인 후 로그인 가능
- **로그인/로그아웃**: 세션 관리
- **역할 기반 접근 제어**: 관리자, 결재자, 신청자

### 2. 관리자 기능 (Admin)

#### 🎯 직원 계정 생성 (핵심 기능)
- **관리자가 직접 신청자/결재자 계정 생성**
- 이름, 이메일, 비밀번호, 역할 입력
- **승인 과정 없이 즉시 사용 가능한 계정 생성**
- **생성된 계정은 모든 PC에서 즉시 로그인 가능** ⭐
- 전체 직원 목록 조회 (역할별 필터링)
- 직원 계정 삭제

#### 기타 관리자 기능
- **관리자 대시보드**: 통계 및 현황 조회
- **가입 승인 관리**: 회원가입 신청 승인/반려
- **회원 관리**: 전체 회원 조회, 역할 변경, 삭제
- **전체 결재 내역**: 모든 결재 건 조회

### 3. 결재자 기능 (Approver)
- **처리할 결재**: 자신에게 할당된 결재 목록
- **결재 상세보기**: 문서 내용 확인, 파일 다운로드
- **승인/반려**: 피드백 작성, 사인 파일 업로드
- **처리 완료**: 처리한 결재 내역 조회
- **내 결재 신청**: 결재자도 결재 요청 가능
- **새 결재 요청**: 다른 결재자에게 결재 요청

### 4. 신청자 기능 (Requester)
- **새 결재 요청**: 제목, 내용, 담당 결재자 선택, 파일 첨부
- **내 결재 신청**: 신청한 결재 목록 및 진행 상황 확인
- **결재 상세보기**: 결재 진행 상황, 피드백 확인
- **파일 다운로드**: 원본 파일, 사인된 파일 다운로드

### 5. 공통 기능
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 지원
- **실시간 알림**: 결재 처리 시 알림 표시
- **자동 새로고침**: 5초마다 데이터 자동 갱신

---

## 📁 프로젝트 구조

```
온라인결재시스템/
├── index.html              # 메인 HTML 파일
├── css/
│   └── style.css          # 스타일시트
├── js/
│   ├── app-clean.js       # API 버전 메인 JavaScript (현재 사용)
│   └── app.js             # LocalStorage 버전 (백업)
└── README.md              # 프로젝트 문서
```

---

## 💾 데이터 모델

### 1. users (사용자)
```javascript
{
  id: "UUID",                    // 자동 생성
  name: "홍길동",
  email: "hong@company.com",
  password: "password123",
  role: "requester",             // admin, approver, requester
  status: "approved",            // approved, pending
  createdAt: "2026-01-28T00:00:00.000Z"
}
```

### 2. pendingUsers (가입 대기)
```javascript
{
  id: "UUID",
  name: "김철수",
  email: "kim@company.com",
  password: "password123",
  role: "requester",
  status: "pending",
  createdAt: "2026-01-28T00:00:00.000Z"
}
```

### 3. approvals (결재 문서)
```javascript
{
  id: "UUID",
  title: "구매 요청서",
  description: "사무용품 구매 요청",
  requesterId: "신청자 ID",
  requesterName: "홍길동",
  assignedApproverId: "결재자 ID",
  assignedApproverName: "김결재",
  status: "pending",             // pending, approved, rejected
  files: [                       // 다중 파일 지원
    {
      fileName: "구매요청서.hwp",
      fileData: "base64..."
    }
  ],
  signedFiles: [                 // 승인 시 사인 파일
    {
      fileName: "구매요청서_승인.pdf",
      fileData: "base64..."
    }
  ],
  feedback: "승인합니다",
  createdAt: "2026-01-28T00:00:00.000Z",
  processedAt: "2026-01-28T01:00:00.000Z",
  processedBy: "결재자 ID"
}
```

### 4. notifications (알림)
```javascript
{
  id: "UUID",
  userId: "수신자 ID",
  type: "approval",              // approval, rejection, request
  title: "결재 승인",
  message: "홍길동님의 결재가 승인되었습니다",
  relatedId: "관련 결재 ID",
  isRead: false,
  createdAt: "2026-01-28T00:00:00.000Z"
}
```

---

## 🔐 기본 계정 정보

### 관리자 계정
- **이메일**: admin@company.com
- **비밀번호**: admin123
- **역할**: 관리자

> **중요**: 최초 접속 시 자동으로 관리자 계정이 생성됩니다.

---

## 📖 사용 방법

### 1. 시스템 접속
1. 웹 브라우저에서 `https://sangwon4052.github.io/sangwon-sign-off/` 접속
2. 관리자 계정으로 로그인 (admin@company.com / admin123)

### 2. 직원 계정 생성 (관리자)
1. 좌측 메뉴에서 **"직원 계정 생성"** 클릭
2. 직원 정보 입력:
   - 이름: 직원 이름
   - 이메일: 직원 이메일 (로그인 ID로 사용)
   - 비밀번호: 최소 6자 이상
   - 역할: 신청자 또는 결재자 선택
3. **"계정 생성"** 버튼 클릭
4. 생성된 이메일과 비밀번호를 직원에게 전달

### 3. 직원 로그인
1. 직원이 자신의 PC에서 시스템 접속
2. 관리자가 알려준 **이메일**과 **비밀번호**로 로그인
3. ✅ **즉시 로그인 가능!** (승인 대기 없음)

### 4. 결재 신청 (신청자)
1. 좌측 메뉴에서 **"새 결재 요청"** 클릭
2. 제목, 내용 입력
3. 담당 결재자 선택
4. 파일 첨부 (워드, 한글, 엑셀 - 다중 파일 가능)
5. **"결재 요청"** 버튼 클릭

### 5. 결재 처리 (결재자)
1. 좌측 메뉴에서 **"처리할 결재"** 클릭
2. 결재 건 선택 → **"상세보기"**
3. 파일 다운로드 및 검토
4. **"승인"** 또는 **"반려"** 선택
5. 피드백 작성 (선택사항)
6. 승인 시 사인된 파일 업로드 가능 (다중 파일)

---

## 🎨 역할별 접근 권한

| 기능 | 관리자 | 결재자 | 신청자 |
|-----|-------|-------|-------|
| 직원 계정 생성 | ✅ | ❌ | ❌ |
| 가입 승인 관리 | ✅ | ❌ | ❌ |
| 회원 관리 | ✅ | ❌ | ❌ |
| 전체 결재 내역 | ✅ | ❌ | ❌ |
| 결재 신청 | ✅ | ✅ | ✅ |
| 결재 승인/반려 | ✅ | ✅ | ❌ |
| 내 결재 조회 | ✅ | ✅ | ✅ |

---

## 🔧 기술 스택

- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **API**: RESTful Table API (중앙 데이터베이스)
- **Storage**: 서버 기반 데이터베이스
- **Authentication**: 세션 기반 (localStorage)
- **Icons**: Font Awesome 6.4.0
- **Fonts**: Noto Sans KR (Google Fonts)

---

## ⚠️ 주의사항

### 파일 업로드
- **지원 형식**: 워드(.doc, .docx), 한글(.hwp), 엑셀(.xls, .xlsx)
- **다중 파일**: 여러 파일 동시 업로드 가능
- **저장 방식**: Base64 인코딩하여 데이터베이스에 저장
- **권장 크기**: 파일당 5MB 이하 (총 10MB 이하)

### 데이터 저장
- ✅ 모든 데이터는 **중앙 서버**에 저장
- ✅ 모든 PC에서 **동일한 데이터** 접근 가능
- ✅ 실시간 데이터 동기화
- ⚠️ 세션 정보만 브라우저 LocalStorage에 저장 (로그인 상태 유지)

### 보안
- ⚠️ **프로토타입 버전**: 비밀번호가 평문으로 저장됩니다
- ⚠️ **운영 환경**: 반드시 비밀번호 암호화 및 HTTPS 사용 필요
- ⚠️ **인증**: 현재는 간단한 세션 방식, 실제 운영 시 JWT 등 사용 권장

---

## 🚀 배포 방법

### GitHub Pages 배포
1. GitHub 저장소에 프로젝트 업로드
2. Settings → Pages → Source를 `main` 브랜치로 설정
3. 생성된 URL을 직원들에게 공유
4. ✅ 모든 직원이 동일한 URL에서 시스템 사용

### 직원 안내 방법
```
안녕하세요,

온라인 결재 시스템 계정이 생성되었습니다.

🔗 접속 주소: https://sangwon4052.github.io/sangwon-sign-off/
📧 이메일: your-email@company.com
🔑 비밀번호: your-password

위 정보로 로그인하시면 바로 사용 가능합니다.
```

---

## 📊 업데이트 내역

### v2.0.0 (2026-01-28) - 🎯 API 버전
- ✅ **LocalStorage → 중앙 데이터베이스 전환**
- ✅ **모든 PC에서 데이터 공유 가능**
- ✅ **관리자가 생성한 계정으로 모든 PC에서 로그인 가능**
- ✅ **RESTful Table API 통합**
- ✅ **실시간 데이터 동기화**
- ✅ **핵심 기능 (로그인, 회원가입, 직원 계정 생성) 완료**

### v1.5.0 (2026-01-26)
- 다중 파일 업로드 지원 (워드, 한글, 엑셀)
- 결재자도 결재 신청 가능
- 승인 시 다중 사인 파일 업로드

### v1.4.0 (2026-01-26)
- 사인된 파일 업로드 및 교환 기능
- 신청자/결재자 파일 다운로드

### v1.3.0 (2026-01-26)
- 알림 센터 추가
- 자동 새로고침 (5초)

---

## 🔮 향후 개발 계획 (2단계)

### 다음 업데이트 예정 (v2.1.0)
- 결재 시스템 API 전환 (생성, 조회, 승인, 반려)
- 알림 시스템 API 전환
- 관리자 대시보드 통계
- 검색 및 필터링 기능
- 파일 미리보기

---

## 📞 지원 및 문의

이 시스템은 **내부용 프로토타입**입니다.  
문제 발생 시 시스템 관리자에게 문의하세요.

---

## 📄 라이선스

내부 사용 전용 - 비공개 프로젝트

---

**마지막 업데이트**: 2026-01-28  
**현재 버전**: v2.0.0  
**시스템 상태**: ✅ 정상 운영 중 (API 버전 - 1단계 완료)
